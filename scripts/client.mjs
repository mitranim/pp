var oe=Object.defineProperty;var r=(t,e)=>oe(t,"name",{value:e,configurable:!0});function o(t){return t==null}r(o,"isNil");function ot(t){return t!=null}r(ot,"isSome");function Ht(t){return typeof t=="boolean"}r(Ht,"isBool");function Q(t){return typeof t=="number"}r(Q,"isNum");function ue(t){return Q(t)?t:f(t,Q)}r(ue,"reqNum");function wt(t){return Q(t)&&!rt(t)&&!me(t)}r(wt,"isFin");function ce(t){return wt(t)?t:f(t,wt)}r(ce,"reqFin");function et(t){return Q(t)&&t%1===0}r(et,"isInt");function fe(t){return et(t)?t:f(t,et)}r(fe,"reqInt");function St(t){return o(t)?0:fe(t)}r(St,"laxInt");function nt(t){return et(t)&&t>=0}r(nt,"isNat");function Ut(t){return nt(t)?t:f(t,nt)}r(Ut,"reqNat");function he(t){return o(t)?0:Ut(t)}r(he,"laxNat");function rt(t){return t!==t}r(rt,"isNaN");function me(t){return t===1/0||t===-1/0}r(me,"isInf");function m(t){return typeof t=="string"}r(m,"isStr");function d(t){return m(t)?t:f(t,m)}r(d,"reqStr");function Kt(t){return o(t)?t:d(t)}r(Kt,"optStr");function y(t){return o(t)?"":d(t)}r(y,"laxStr");function ut(t){return typeof t=="symbol"}r(ut,"isSym");function Z(t){return c(t)||u(t)}r(Z,"isComp");function yt(t){return!Z(t)}r(yt,"isPrim");function u(t){return typeof t=="function"}r(u,"isFun");function I(t){return u(t)?t:f(t,u)}r(I,"reqFun");function c(t){return ot(t)&&typeof t=="object"}r(c,"isObj");function de(t){return c(t)?t:f(t,c)}r(de,"reqObj");function Gt(t){return o(t)?t:de(t)}r(Gt,"optObj");function X(t){return c(t)&&!(Symbol.iterator in t)}r(X,"isStruct");function pe(t){return X(t)?t:f(t,X)}r(pe,"reqStruct");function W(t){return Array.isArray(t)}r(W,"isArr");function Nt(t){return p(t,RegExp)}r(Nt,"isReg");function le(t){return Nt(t)?t:f(t,Nt)}r(le,"reqReg");function ae(t){return p(t,Date)}r(ae,"isDate");function it(t){return p(t,Set)}r(it,"isSet");function ge(t){return it(t)?t:f(t,it)}r(ge,"reqSet");function st(t){return p(t,Map)}r(st,"isMap");function Te(t){return st(t)?t:f(t,st)}r(Te,"reqMap");function q(t){return c(t)&&Symbol.iterator in t&&u(t[Symbol.iterator])}r(q,"isIter");function Jt(t){return q(t)&&He(t)}r(Jt,"isIterator");function xt(t){return u(t)&&c(t.prototype)}r(xt,"isCls");function E(t){return xt(t)?t:f(t,xt)}r(E,"reqCls");function a(t){return ot(t)&&(W(t)||q(t)&&nt(Ae(t)))}r(a,"isList");function Le(t){return a(t)?t:f(t,a)}r(Le,"reqList");function ct(t){if(c(t)){let e=H(t,"toString");return u(e)&&e!==Object.prototype.toString&&e!==Array.prototype.toString}return!(o(t)||ut(t)||u(t))}r(ct,"isScalar");function Me(t){return q(t)&&"toArray"in t&&u(t.toArray)}r(Me,"isArrble");function Ee(t){return c(t)?a(t)?t.length===0:q(t)?Ce(t)===0:!1:!0}r(Ee,"isEmpty");function p(t,e){return c(t)&&t instanceof e}r(p,"isInst");function b(t,e){if(_t(e)(t))return t;throw vt(t,e)}r(b,"req");function ft(t,e){return _t(e),o(t)?t:b(t,e)}r(ft,"opt");function Qt(t){if(m(t))return t;if(ae(t))return Ie(t);if(ct(t))return String(t);throw ht(t,"string")}r(Qt,"render");function be(t){return o(t)?"":Qt(t)}r(be,"renderLax");function h(t){return m(t)?JSON.stringify(t):ut(t)?t.toString():u(t)?te(t):c(t)?Ne(t):String(t)}r(h,"show");function Xt(t,e){return t===e||rt(t)&&rt(e)}r(Xt,"is");function P(t,e){return Z(t)&&e in t}r(P,"hasIn");function Zt(t,e){return Z(t)&&Object.prototype.hasOwnProperty.call(t,e)}r(Zt,"hasOwn");function Wt(t,e){return P(t,e)&&u(t[e])}r(Wt,"hasMeth");function Yt(){}r(Yt,"empty");Yt.prototype=null;var l=class extends Yt{get[Symbol.toStringTag](){return this.constructor.name}};r(l,"Emp");function He(t){return"next"in t&&u(t.next)}r(He,"hasNext");function _t(t){if(!u(t))throw TypeError(`expected validator function, got ${h(t)}`);return t}r(_t,"reqValid");function f(t,e){throw vt(t,e)}r(f,"convFun");function vt(t,e){return we(t,ee(e))}r(vt,"errFun");function we(t,e){return TypeError(`expected variant of ${e}, got ${h(t)}`)}r(we,"errType");function ht(t,e){return TypeError(Se(t,e))}r(ht,"errConv");function Se(t,e){return`unable to convert ${h(t)} to ${e}`}r(Se,"msgConv");function ye(t,e){return`expected variant of ${e}, got ${h(t)}`}r(ye,"msgType");function At(){return TypeError("not implemented")}r(At,"errImpl");function te(t){return`[function ${t.name||t}]`}r(te,"showFun");function ee(t){return t.name||te(t)}r(ee,"showFunName");function Ne(t){if(p(t,Error))return String(t);if(W(t))return JSON.stringify(t);let e=Oe(t);if(!e||e===Object)return JSON.stringify(t);let n=xe(e);return n?`[object ${n}]`:String(t)}r(Ne,"showObj");function H(t,e){return Z(t)&&e in t?t[e]:void 0}r(H,"get");function Ct(t,e){return Zt(t,e)?t[e]:void 0}r(Ct,"getOwn");function xe(t){return H(t,"name")}r(xe,"getName");function Ae(t){return H(t,"length")}r(Ae,"getLength");function Ce(t){return H(t,"size")}r(Ce,"getSize");function Oe(t){return H(t,"constructor")}r(Oe,"getCon");function Ie(t){return t.toString===Date.prototype.toString?t.toISOString():t.toString()}r(Ie,"renderDate");function qe(t){return o(t)?[]:Object.keys(pe(t))}r(qe,"structKeys");function Pe(t){return Array(Ut(t))}r(Pe,"alloc");function Ot(t){return mt(t)?t.slice():W(t)?[].concat(t):Array.prototype.slice.call(t)}r(Ot,"arrFromList");function It(t){let e=[];for(t of t)e.push(t);return e}r(It,"arrFromIter");function De(t){return mt(t)?t:je(t)}r(De,"values");function je(t){if(!c(t))return[];if(a(t))return Ot(t);if(Me(t))return Ot(t.toArray());if(it(t))return qt(t,$e);if(st(t))return qt(t,Fe);if(q(t)&&Wt(t,"values"))return It(t.values());if(Jt(t))return It(t);if(Je(t))return ke(t);throw ht(t,"values")}r(je,"valuesCopy");function qt(t,e){let n=[];return e(t,n),n}r(qt,"withBuf");function $e(t,e){for(t of ge(t).values())e.push(t)}r($e,"copySet");function Fe(t,e){for(t of Te(t).values())e.push(t)}r(Fe,"copyMap");function ke(t){let e=Object.keys(t),n=e.length,i=-1;for(;++i<n;)e[i]=t[e[i]];return e}r(ke,"valuesFromStruct");function Be(t,e){if(o(t))return-1;let n=Le(t).length,i=-1;for(;++i<n;)if(Xt(t[i],e))return i;return-1}r(Be,"indexOf");function Ve(t,e){if(I(e),ft(t,a)){let n=t.length,i=-1;for(;++i<n;)if(e(t[i]))return i}return-1}r(Ve,"findIndex");function ze(t,e){t=Qe(t),I(e);let n=t.length,i=-1;for(;++i<n;)t[i]=e(t[i]);return t}r(ze,"mapMut");function Re(t,e){I(e);let n=[];for(t of De(t))e(t)&&n.push(t);return n}r(Re,"filter");function Ue(t,e){if(t=St(t),e=St(e),!(e>=t))throw Error(`invalid range [${t},${e})`);let n=Pe(e-t),i=n.length,s=-1;for(;++s<i;)n[s]=t+s;return n}r(Ue,"range");function Ke(t){return Ue(0,he(t))}r(Ke,"span");function Ge(t,e){return ze(Ke(t),e)}r(Ge,"times");function Je(t){return X(t)&&!(Symbol.asyncIterator in t)}r(Je,"isStructSync");function mt(t){return W(t)&&t.constructor===Array}r(mt,"isTrueArr");function Qe(t){return b(t,mt)}r(Qe,"reqTrueArr");function Pt(t){return m(t)||ut(t)}r(Pt,"isObjKey");function ne(t){return Pt(t)?t:f(t,Pt)}r(ne,"reqObjKey");function Y(t){return r(class extends t{static get main(){let n=Symbol.for("main");return Zt(this,n)?this[n]:this[n]=this.default}static get default(){return new this}},"MixMainCls")}r(Y,"MixMain");var A=class extends l{apply(){throw At()}construct(){throw At()}defineProperty(){return!1}deleteProperty(){return!1}get(){}getOwnPropertyDescriptor(){}getPrototypeOf(){return null}has(){return!1}isExtensible(){return!1}ownKeys(){return[]}preventExtensions(){return!1}set(){return!1}setPrototypeOf(){return!1}};r(A,"BlankPh");var T=class extends Y(WeakMap){goc(e){return this.has(e)||this.set(e,this.make(e)),this.get(e)}make(){}};r(T,"WeakCache");function Xe(t,e){let n=E(t).prototype;for(e=E(e).prototype;e;){for(let[i,s]of Ze(e))i in n||Object.defineProperty(n,i,s);e=Object.getPrototypeOf(e)}return t}r(Xe,"mixin");function Dt(t,e,n){return Object.defineProperty(t,ne(e),{value:n,writable:!0,enumerable:!1,configurable:!0}),n}r(Dt,"priv");function jt(t,e,n){return Object.defineProperty(t,ne(e),{value:n,writable:!1,enumerable:!0,configurable:!0}),n}r(jt,"__final");function Ze(t){return Object.entries(Object.getOwnPropertyDescriptors(t))}r(Ze,"descriptors");var We=!!(typeof window=="object"&&window&&typeof document=="object"&&document);function Ye(t){return typeof Event=="function"&&p(t,Event)}r(Ye,"isEvent");function _e(t){return ft(t,Ye)}r(_e,"optEvent");function ve(t){return P(t,"parentNode")}r(ve,"isChildNode");function tn(t){return P(t,"childNodes")}r(tn,"isParentNode");function dt(t){return _e(t)&&(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()),t}r(dt,"eventStop");function en(t,e){return E(e),re(t,r(function(i){return p(i,e)},"test"))}r(en,"ancestor");function re(t,e){for(I(e);ot(t);){if(e(t))return t;if(!ve(t))break;t=t.parentNode}}r(re,"findAncestor");function nn(t,e){for(t of ie(t,e))return t}r(nn,"descendant");function rn(t,e){for(t of _(t,e))return t}r(rn,"findDescendant");function ie(t,e){return E(e),_(t,r(function(i){return p(i,e)},"test"))}r(ie,"descendants");function*_(t,e){if(I(e),!o(t)&&(e(t)&&(yield t),!!tn(t)&&(t=t.childNodes,t)))for(t of t)yield*_(t,e)}r(_,"findDescendants");function sn(t){return D.main.goc(t)}r(sn,"MixNode");var D=class extends T{make(e){return r(class extends e{anc(i){return en(this,i)}findAnc(i){return re(this,i)}desc(i){return nn(this,i)}findDesc(i){return rn(this,i)}descs(i){return ie(this,i)}findDescs(i){return _(this,i)}setText(i){let s=this.textContent,S=be(i);return s!==S&&(this.textContent=S),this}},"MixNodeCls")}};r(D,"MixNodeCache");var $t="http://www.w3.org/1999/xhtml",Ft="http://www.w3.org/2000/svg",on=new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected","truespeed"]),un=new Set(["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"]),j=class extends l{constructor(e){super(),this.doc=ln(e),this.elemHtml=this.elemHtml.bind(this),this.elemSvg=this.elemSvg.bind(this),this.elem=this.elem.bind(this),this.frag=this.frag.bind(this)}get E(){return Dt(this,"E",new Proxy(this,new $))}get S(){return Dt(this,"S",new Proxy(this,new F))}elemHtml(e,n,...i){return e==="svg"?this.alignNs(this.elemSvg(e,n,...i)):(this.isVoid(e)&&i.length&&this.throwVoidChi(e,i),this.elem(e,n,...i))}elemSvg(e,n,...i){return this.mut(this.makeSvg(e,n),n,...i)}elem(e,n,...i){return this.mut(this.make(e,n),n,...i)}frag(...e){let n=this.doc.createDocumentFragment();return this.appendList(n,e),n}makeHtml(e,n){return this.makeNs($t,e,N(n))}makeSvg(e,n){return this.makeNs(Ft,e,N(n))}makeNs(e,n,i){return this.doc.createElementNS(d(e),d(n),N(i))}make(e,n){return this.doc.createElement(d(e),N(n))}makeBuf(e){let n=H(e,"namespaceURI");return n?this.makeNs(n,"span"):this.make("span")}mut(e,n,...i){return this.mutProps(e,n),this.mutChi(e,...i),e}mutProps(e,n){return this.loop(dn(e),n,this.mutProp)}mutProp(e,n,i){return n==="attributes"?this.mutAttrs(e,i):n==="class"?this.mutCls(e,i):n==="className"?this.mutCls(e,i):n==="style"?this.mutStyle(e,i):n==="dataset"?this.mutDataset(e,i):this.mutPropAny(e,n,i)}mutAttrs(e,n){return this.loop(e,n,this.mutAttr)}mutAttr(e,n,i){return this.isBool(n)?this.mutAttrBool(e,n,i):this.mutAttrAny(e,n,i)}mutAttrBool(e,n,i){return d(n),tt(n,i,Ht)?e.setAttribute(n,""):e.removeAttribute(n)}mutAttrAny(e,n,i){return d(n),i=this.strOpt(i),o(i)?e.removeAttribute(n):e.setAttribute(n,i)}mutCls(e,n){n=this.strLax(n),n!==y(e.getAttribute("class"))&&e.setAttribute("class",n)}mutStyle(e,n){if(o(n)||m(n))return this.mutAttrAny(e,"style",n);if(X(n))return this.mutStyleStruct(e,n);throw ht(n,"style")}mutStyleStruct(e,n){return this.loop(e.style,n,this.mutStyleProp),e}mutStyleProp(e,n,i){e[n]=y(tt(n,i,m))}mutDataset(e,n){return this.loop(e.dataset,n,this.mutDatasetProp),e}mutDatasetProp(e,n,i){i=this.strOpt(i),o(i)?delete e[n]:e[n]=i}mutPropAny(e,n,i){if(!(n in e))return this.mutAttr(e,n,i);let s=e[n];if(o(s))return x(e,n,s,V(i));if(m(s))return x(e,n,s,this.strLax(i));if(yt(s)){if(yt(i))return this.isBool(n)&&tt(n,i,Ht),x(e,n,s,V(i));throw Vt(e,n,i,s)}if(u(s)){if(o(i)||u(i))return x(e,n,s,V(i));throw Vt(e,n,i,s)}return this.mutAttr(e,n,i)}mutChi(e,...n){if(v(e),!n.length)return this.clear(e),e;if(!e.hasChildNodes()){for(n of n)this.appendChi(e,n);return e}let i=this.frag(...n);return this.clear(e),e.appendChild(i),e}appendChi(e,n){return o(n)?e:m(n)?(e.append(n),e):pt(n)?(e.appendChild(n),e):mn(n)?(this.appendRaw(e,n),e):hn(n)?a(n)?(this.appendList(e,n),e):(this.appendSeq(e,n),e):(this.appendChi(e,this.strOpt(n)),e)}appendList(e,n){let i=0;for(;;){let s=ue(n.length);if(!(i>=0&&i<s))return e;this.appendChi(e,n[i]),i+=1,i-=ce(an(s,n.length))}}appendSeq(e,n){for(n of n)this.appendChi(e,n);return e}appendRaw(e,n){if(!e.hasChildNodes()&&"innerHTML"in e)return e.innerHTML=y(n.outerHTML),e;let i=this.makeBuf(e);return i.innerHTML=y(n.outerHTML),this.move(e,i)}mutText(e,n){return v(e),x(e,"textContent",e.textContent,this.strLax(n)),e}replace(e,...n){v(e),e.parentNode.replaceChild(this.frag(...n),e)}clear(e){for(;e.hasChildNodes();)e.removeChild(e.lastChild);return e}move(e,n){if(n!==e)for(;n.hasChildNodes();)e.appendChild(n.removeChild(n.firstChild));return e}loop(e,n,i){if(n=N(n))for(let s of qe(n))i.call(this,e,s,n[s]);return e}isHtml(e){return e.namespaceURI===$t}isSvg(e){return e.namespaceURI===Ft}alignNs(e){if(!(se(e)&&Bt(e)))return e;let n=e.firstChild;if(!Bt(n))return e;let i=e.namespaceURI;return i&&i!==n.namespaceURI&&(e.innerHTML=e.innerHTML),e}strLax(e){return y(this.strOpt(e))}strOpt(e){if(!(o(e)||this.lax&&!ct(e)))return Qt(e)}isBool(e){return on.has(e)}isVoid(e){return un.has(e)}throwVoidChi(e,n){throw SyntaxError(`expected void element ${h(e)} to have no children, got ${h(n)}`)}patchProto(e){return Xe(e,cn(l)),e.ren=this,this}static native(){return new this(globalThis.document).patchProto(globalThis.Element)}};r(j,"Ren");var $=class extends A{get(e,n){return e.makeHtml(n)}};r($,"RenHtmlPh");var F=class extends A{get(e,n){return e.makeSvg(n)}};r(F,"RenSvgPh");function cn(t){return k.main.goc(t)}r(cn,"MixRen");var k=class extends T{make(e){return r(class extends e{get ren(){return this.constructor.ren}props(i){return this.ren.mutProps(this,i)}chi(...i){return this.ren.mutChi(this,...i)}},"MixRenCls")}};r(k,"MixRenCache");var kt=Symbol.for("parentNode");function fn(t){return B.main.goc(t)}r(fn,"MixChild");var B=class extends T{make(e){return r(class extends e{constructor(i){super(),Gt(i)&&(this.parentNode=i)}get parentNode(){return super.parentNode||V(this[kt])}set parentNode(i){this[kt]=i}},"MixChildCls")}};r(B,"MixChildCache");Symbol.for("$");Symbol.for("frozen");function hn(t){return c(t)&&!ct(t)&&(a(t)||Jt(t))}r(hn,"isSeq");function mn(t){return P(t,"outerHTML")}r(mn,"isRaw");function pt(t){return c(t)&&"parentNode"in t&&"childNodes"in t}r(pt,"isNode");function v(t){return b(t,pt)}r(v,"reqNode");function se(t){return pt(t)&&"setAttribute"in t}r(se,"isElement");function dn(t){return b(t,se)}r(dn,"reqElement");function pn(t){return c(t)&&"createElement"in t&&"createElementNS"in t&&"createDocumentFragment"in t}r(pn,"isDocument");function ln(t){return b(t,pn)}r(ln,"reqDocument");function Bt(t){return P(t,"namespaceURI")}r(Bt,"isNamespaced");function N(t){return Gt(t)&&"$"in t?t.$:t}r(N,"deref");function V(t){return t!=null?t:null}r(V,"norm");function Vt(t,e,n,i){return TypeError(`unable to set ${h(e)} ${h(n)} on ${h(t)}: type mismatch with ${h(i)}`)}r(Vt,"errMismatch");function x(t,e,n,i){Xt(n,i)||(t[e]=i)}r(x,"setOpt");function tt(t,e,n){if(o(e)||n(e))return e;throw TypeError(`invalid property ${h(t)}: `+ye(e,ee(n)))}r(tt,"optAt");function an(t,e){return t>e?t-e:0}r(an,"reduction");var C=class extends Map{set(e,n){return super.set(d(e),Kt(n))}};r(C,"StrMap");var z=class extends Y(C){static get default(){return new this().set("a","HTMLAnchorElement").set("area","HTMLAreaElement").set("audio","HTMLAudioElement").set("base","HTMLBaseElement").set("body","HTMLBodyElement").set("br","HTMLBRElement").set("button","HTMLButtonElement").set("canvas","HTMLCanvasElement").set("data","HTMLDataElement").set("datalist","HTMLDataListElement").set("details","HTMLDetailsElement").set("dialog","HTMLDialogElement").set("div","HTMLDivElement").set("dl","HTMLDListElement").set("embed","HTMLEmbedElement").set("fieldset","HTMLFieldSetElement").set("font","HTMLFontElement").set("form","HTMLFormElement").set("frame","HTMLFrameElement").set("frameset","HTMLFrameSetElement").set("head","HTMLHeadElement").set("heading","HTMLHeadingElement").set("hr","HTMLHRElement").set("html","HTMLHtmlElement").set("iframe","HTMLIFrameElement").set("image","HTMLImageElement").set("input","HTMLInputElement").set("label","HTMLLabelElement").set("legend","HTMLLegendElement").set("li","HTMLLIElement").set("link","HTMLLinkElement").set("map","HTMLMapElement").set("marquee","HTMLMarqueeElement").set("menu","HTMLMenuElement").set("meta","HTMLMetaElement").set("meter","HTMLMeterElement").set("del","HTMLModElement").set("ins","HTMLModElement").set("object","HTMLObjectElement").set("ol","HTMLOListElement").set("optgroup","HTMLOptGroupElement").set("option","HTMLOptionElement").set("output","HTMLOutputElement").set("p","HTMLParagraphElement").set("param","HTMLParamElement").set("picture","HTMLPictureElement").set("pre","HTMLPreElement").set("progress","HTMLProgressElement").set("q","HTMLQuoteElement").set("blockquote","HTMLQuoteElement").set("script","HTMLScriptElement").set("select","HTMLSelectElement").set("slot","HTMLSlotElement").set("source","HTMLSourceElement").set("span","HTMLSpanElement").set("style","HTMLStyleElement").set("caption","HTMLTableCaptionElement").set("th","HTMLTableCellElement").set("td","HTMLTableCellElement").set("col","HTMLTableColElement").set("colgroup","HTMLTableColElement").set("table","HTMLTableElement").set("tr","HTMLTableRowElement").set("tfoot","HTMLTableSectionElement").set("thead","HTMLTableSectionElement").set("tbody","HTMLTableSectionElement").set("template","HTMLTemplateElement").set("textarea","HTMLTextAreaElement").set("time","HTMLTimeElement").set("title","HTMLTitleElement").set("track","HTMLTrackElement").set("ul","HTMLUListElement").set("video","HTMLVideoElement").set("svg","SVGSvgElement")}};r(z,"TagToCls");var R=class extends Y(C){invert(e){for(let[n,i]of e)this.set(i,this.has(i)?void 0:n);return this}localName(e){for(E(e);u(e);){let{name:n}=e;if(n){if(this.has(n))return this.get(n);let i=n.match(le(this.re));if(i){let s=i[1].toLowerCase();return this.set(n,s),s}}e=Object.getPrototypeOf(e)}}get re(){return/^(?:HTML|SVG)(\w*)Element$/}static get default(){return new this().invert(z.main)}};r(R,"ClsToTag");function w(t){return O.main.reg(t)}r(w,"reg");var O=class extends Y(l){constructor(e){super(),this.pending=new Set,this.tagToCls=new Map,this.clsToTag=new Map,this.definer=zt(e)}reg(e){return this.hasCls(e)||(this.mut(e),this.def(e)),e}def(e){var S,bt;if(!this.definer){this.pending.add(e);return}this.pending.delete(e);let{customName:n}=e;if((bt=(S=this.definer).get)!=null&&bt.call(S,n))return;let{localName:i}=e,s=i!==n?{extends:i}:void 0;this.definer.define(n,e,s)}hasTag(e){return this.tagToCls.has(e)}hasCls(e){return this.clsToTag.has(e)}tagCls(e){return this.tagToCls.get(e)}clsTag(e){return this.clsToTag.get(e)}setDefiner(e){if(this.definer=zt(e))for(let n of this.pending)this.def(n)}mut(e){let n=Ct(e,"customName")||this.toTag(e.name);if(!n)throw Error(`unable to derive custom name for ${h(e)}`);let i=Ct(e,"localName")||R.main.localName(e)||n;jt(e,"localName",i),jt(e,"customName",n),this.assoc(n,e)}toTag(e){e=gn(e);let n=e,i=0;for(;this.hasTag(n);)n=e+"-"+ ++i;return n}assoc(e,n){bn(e),E(n),this.clsToTag.set(n,e),this.tagToCls.set(e,n)}};r(O,"Reg");function gn(t){let e=Tn(Kt(t));switch(e.length){case 0:return"";case 1:return"a-"+e[0].toLowerCase();default:return Ln(e)}}r(gn,"toTag");function Tn(t){return t&&t.match(/[A-Za-z0-9]+?(?=[^a-z0-9]|$)/g)||[]}r(Tn,"toWords");function Ln(t){return t.join("-").toLowerCase()}r(Ln,"kebab");function Mn(t){return Wt(t,"define")}r(Mn,"isDefiner");function zt(t){return ft(t,Mn)}r(zt,"optDefiner");function En(t){return m(t)&&/^[a-z][a-z\d_.]*-[a-z\d_.-]*$/.test(t)}r(En,"isCustomName");function bn(t){return b(t,En)}r(bn,"reqCustomName");var g=globalThis,Rt;(Rt=g.document)==null||Rt.implementation;var Hn=g.document,wn=g.customElements;O.main.setDefiner(wn);var Dn=new j(Hn).patchProto(g.Element);function lt(t){return fn(sn(t))}r(lt,"MixElem");var at=class extends lt(g.HTMLElement){init(...e){for(let i of e)Sn(i);let n=e.length;return this.props({class:"carousel"}).chi(e,new L().init(n),new G().init(n),new J().init(n)).setNext()}connectedCallback(){this.initTimer()}disconnectedCallback(){this.deinitTimer()}initTimer(){this.deinitTimer(),this.timer=setInterval(this.setNext.bind(this),1024*3)}deinitTimer(){clearInterval(this.timer),this.timer=void 0}dots(){return this.desc(L)}items(){return Re(this.childNodes,yn)}setInd(e){let n=this.items();if(Ee(n))return this;for(let i of n)i.hidden=!0;return n[e].hidden=!1,this.dots().setInd(e),this}setPrev(){return this.setInd(this.dots().prevInd())}setNext(){return this.setInd(this.dots().nextInd())}},U=at;r(U,"Carousel"),(()=>{w(at)})();function Sn(t){return t.setAttribute("data-carousel-item",""),t.classList.add("carousel-item"),t.hidden=!0,t}r(Sn,"initCarouselItem");function yn(t){return t.hasAttribute("data-carousel-item")}r(yn,"isCarouselItem");var gt=class extends lt(g.HTMLElement){init(e){return this.props({class:"carousel-dots"}).chi(Ge(e,xn))}currentInd(){return Ve(this.childNodes,Nn)}prevInd(){return(this.currentInd()-1+this.childNodes.length)%this.childNodes.length}nextInd(){return(this.currentInd()+1)%this.childNodes.length}setInd(e){for(let n of this.childNodes)n.unsetCurrent();this.childNodes[e].setCurrent()}},L=gt;r(L,"CarouselDots"),(()=>{w(gt)})();function Nn(t){return t.isCurrent()}r(Nn,"isCurrent");var Tt=class extends lt(g.HTMLButtonElement){caro(){return this.anc(U)}init(){return this.props(this.A)}connectedCallback(){this.onclick=this.onClick}},M=Tt;r(M,"CarouselBtn"),(()=>{w(Tt)})();function xn(){return new K().init()}r(xn,"makeCarouselDot");var Lt=class extends M{get A(){return{class:"carousel-dot"}}ind(){return Be(this.anc(L).childNodes,this)}onClick(e){dt(e),this.caro().setInd(this.ind()).initTimer()}isCurrent(){return!!this.hasAttribute("aria-current")}setCurrent(){this.setAttribute("aria-current","step")}unsetCurrent(){this.removeAttribute("aria-current")}},K=Lt;r(K,"CarouselDot"),(()=>{w(Lt)})();var Mt=class extends M{get A(){return{class:"carousel-control carousel-prev"}}onClick(e){dt(e),this.caro().setPrev()}},G=Mt;r(G,"CarouselPrev"),(()=>{w(Mt)})();var Et=class extends M{get A(){return{class:"carousel-control carousel-next"}}onClick(e){dt(e),this.caro().setNext()}},J=Et;r(J,"CarouselNext"),(()=>{w(Et)})();function An(){let t=window.location,e=window.history,n=t.hash;if(!n)return;let i=document.querySelector(n);i&&(i.scrollIntoView(),e.replaceState(e.state,"",t.origin+t.pathname+t.search))}r(An,"clearHash");We&&An();export{U as Carousel,lt as MixElem,Dn as ren};
