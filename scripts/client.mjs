var ge=Object.defineProperty;var Te=(t,e,n)=>e in t?ge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var l=(t,e,n)=>(Te(t,typeof e!="symbol"?e+"":e,n),n);function s(t){return t==null}function at(t){return t!=null}function At(t){return typeof t=="boolean"}function z(t){return typeof t=="number"}function be(t){return z(t)?t:c(t,z)}function It(t){return z(t)&&!nt(t)&&!ye(t)}function Me(t){return It(t)?t:c(t,It)}function tt(t){return z(t)&&t%1===0}function Ee(t){return tt(t)?t:c(t,tt)}function Ot(t){return s(t)?0:Ee(t)}function et(t){return tt(t)&&t>=0}function Yt(t){return et(t)?t:c(t,et)}function Le(t){return s(t)?0:Yt(t)}function nt(t){return t!==t}function ye(t){return t===1/0||t===-1/0}function m(t){return typeof t=="string"}function f(t){return m(t)?t:c(t,m)}function _t(t){return s(t)?t:f(t)}function M(t){return s(t)?"":f(t)}function pt(t){return typeof t=="symbol"}function G(t){return o(t)||u(t)}function qt(t){return!G(t)}function u(t){return typeof t=="function"}function O(t){return u(t)?t:c(t,u)}function o(t){return at(t)&&typeof t=="object"}function vt(t){return o(t)?t:c(t,o)}function te(t){return s(t)?t:vt(t)}function R(t){return o(t)&&!(Symbol.iterator in t)}function we(t){return R(t)?t:c(t,R)}function J(t){return Array.isArray(t)}function Pt(t){return T(t,RegExp)}function He(t){return Pt(t)?t:c(t,Pt)}function Se(t){return T(t,Date)}function rt(t){return T(t,Set)}function xe(t){return rt(t)?t:c(t,rt)}function it(t){return T(t,Map)}function Ne(t){return it(t)?t:c(t,it)}function q(t){return o(t)&&Symbol.iterator in t&&u(t[Symbol.iterator])}function ee(t){return q(t)&&qe(t)}function kt(t){return u(t)&&o(t.prototype)}function H(t){return kt(t)?t:c(t,kt)}function E(t){return at(t)&&(J(t)||q(t)&&et(Fe(t)))}function Ce(t){return E(t)?t:c(t,E)}function gt(t){if(o(t)){let e=N(t,"toString");return u(e)&&e!==Object.prototype.toString&&e!==Array.prototype.toString}return!(s(t)||pt(t)||u(t))}function Ae(t){return q(t)&&"toArray"in t&&u(t.toArray)}function Ie(t){return o(t)?E(t)?t.length===0:q(t)?ze(t)===0:!1:!0}function T(t,e){return o(t)&&t instanceof e}function S(t,e){if(ue(e)(t))return t;throw oe(t,e)}function Tt(t,e){return ue(e),s(t)?t:S(t,e)}function K(t){if(m(t))return t;if(Se(t))return Ke(t);if(gt(t))return String(t);throw bt(t,"string")}function Oe(t){return s(t)?"":K(t)}function h(t){return m(t)?JSON.stringify(t):pt(t)?t.toString():u(t)?ce(t):o(t)?De(t):String(t)}function ne(t,e){return t===e||nt(t)&&nt(e)}function x(t,e){return G(t)&&e in t}function re(t,e){return G(t)&&Object.prototype.hasOwnProperty.call(t,e)}function ie(t,e){return x(t,e)&&u(t[e])}function se(){}se.prototype=null;var g=class extends se{get[Symbol.toStringTag](){return this.constructor.name}};function qe(t){return"next"in t&&u(t.next)}function ue(t){if(!u(t))throw TypeError(`expected validator function, got ${h(t)}`);return t}function c(t,e){throw oe(t,e)}function oe(t,e){return Pe(t,he(e))}function Pe(t,e){return TypeError(`expected variant of ${e}, got ${h(t)}`)}function bt(t,e){return TypeError(ke(t,e))}function ke(t,e){return`unable to convert ${h(t)} to ${e}`}function $e(t,e){return`expected variant of ${e}, got ${h(t)}`}function $t(){return TypeError("not implemented")}function ce(t){return`[function ${t.name||t}]`}function he(t){return t.name||ce(t)}function De(t){if(T(t,Error))return String(t);if(J(t))return JSON.stringify(t);let e=Re(t);if(!e||e===Object)return JSON.stringify(t);let n=je(e);return n?`[object ${n}]`:String(t)}function N(t,e){return G(t)&&e in t?t[e]:void 0}function Dt(t,e){return re(t,e)?t[e]:void 0}function je(t){return N(t,"name")}function Fe(t){return N(t,"length")}function ze(t){return N(t,"size")}function Re(t){return N(t,"constructor")}function Ke(t){return t.toString===Date.prototype.toString?t.toISOString():t.toString()}function fe(t){return s(t)?[]:Object.keys(we(t))}function Be(t){return Array(Yt(t))}function jt(t){return Mt(t)?t.slice():J(t)?[].concat(t):Array.prototype.slice.call(t)}function Ft(t){let e=[];for(t of t)e.push(t);return e}function Ve(t){return Mt(t)?t:Ue(t)}function Ue(t){if(!o(t))return[];if(E(t))return jt(t);if(Ae(t))return jt(t.toArray());if(rt(t))return zt(t,Ge);if(it(t))return zt(t,Je);if(q(t)&&ie(t,"values"))return Ft(t.values());if(ee(t))return Ft(t);if(en(t))return Qe(t);throw bt(t,"values")}function zt(t,e){let n=[];return e(t,n),n}function Ge(t,e){for(t of xe(t).values())e.push(t)}function Je(t,e){for(t of Ne(t).values())e.push(t)}function Qe(t){let e=Object.keys(t),n=e.length,r=-1;for(;++r<n;)e[r]=t[e[r]];return e}function We(t,e){if(s(t))return-1;let n=Ce(t).length,r=-1;for(;++r<n;)if(ne(t[r],e))return r;return-1}function Xe(t,e){if(O(e),Tt(t,E)){let n=t.length,r=-1;for(;++r<n;)if(e(t[r]))return r}return-1}function Ze(t,e){t=nn(t),O(e);let n=t.length,r=-1;for(;++r<n;)t[r]=e(t[r]);return t}function Ye(t,e){O(e);let n=[];for(t of Ve(t))e(t)&&n.push(t);return n}function _e(t,e){if(t=Ot(t),e=Ot(e),!(e>=t))throw Error(`invalid range [${t},${e})`);let n=Be(e-t),r=n.length,i=-1;for(;++i<r;)n[i]=t+i;return n}function ve(t){return _e(0,Le(t))}function tn(t,e){return Ze(ve(t),e)}function en(t){return R(t)&&!(Symbol.asyncIterator in t)}function Mt(t){return J(t)&&t.constructor===Array}function nn(t){return S(t,Mt)}function Rt(t){return m(t)||pt(t)}function me(t){return Rt(t)?t:c(t,Rt)}function P(t){return class extends t{static get main(){let n=Symbol.for("main");return re(this,n)?this[n]:this[n]=this.default}static get default(){return new this}}}var B=class extends g{apply(){throw $t()}construct(){throw $t()}defineProperty(){return!1}deleteProperty(){return!1}get(){}getOwnPropertyDescriptor(){}getPrototypeOf(){return null}has(){return!1}isExtensible(){return!1}ownKeys(){return[]}preventExtensions(){return!1}set(){return!1}setPrototypeOf(){return!1}},I=class extends P(WeakMap){goc(e){return this.has(e)||this.set(e,this.make(e)),this.get(e)}make(){}};function rn(t,e){let n=H(t).prototype;for(e=H(e).prototype;e;){for(let[r,i]of sn(e))r in n||Object.defineProperty(n,r,i);e=Object.getPrototypeOf(e)}return t}function Kt(t,e,n){return Object.defineProperty(t,me(e),{value:n,writable:!0,enumerable:!1,configurable:!0}),n}function Bt(t,e,n){return Object.defineProperty(t,me(e),{value:n,writable:!1,enumerable:!0,configurable:!0}),n}function sn(t){return Object.entries(Object.getOwnPropertyDescriptors(t))}var un=!!(typeof window=="object"&&window&&typeof document=="object"&&document);function on(t){return typeof Event=="function"&&T(t,Event)}function de(t){return Tt(t,on)}function cn(t){return x(t,"parentNode")}function hn(t){return x(t,"childNodes")}function Q(t){return de(t)&&(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()),t}function fn(t){return!!(de(t)&&(t.altKey||t.ctrlKey||t.metaKey||t.shiftKey))}function mn(t,e){return H(e),le(t,function(r){return T(r,e)})}function le(t,e){for(O(e);at(t);){if(e(t))return t;if(!cn(t))break;t=t.parentNode}}function dn(t,e){for(t of ae(t,e))return t}function ln(t,e){for(t of W(t,e))return t}function ae(t,e){return H(e),W(t,function(r){return T(r,e)})}function*W(t,e){if(O(e),!s(t)&&(e(t)&&(yield t),!!hn(t)&&(t=t.childNodes,t)))for(t of t)yield*W(t,e)}function an(t){return st.main.goc(t)}var st=class extends I{make(e){return class extends e{anc(r){return mn(this,r)}findAnc(r){return le(this,r)}desc(r){return dn(this,r)}findDesc(r){return ln(this,r)}descs(r){return ae(this,r)}findDescs(r){return W(this,r)}setText(r){let i=this.textContent,C=Oe(r);return i!==C&&(this.textContent=C),this}}}},Vt="http://www.w3.org/1999/xhtml",Ut="http://www.w3.org/2000/svg",pn=new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected","truespeed"]),gn=new Set(["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"]),ut=class extends g{constructor(e){super(),this.doc=wn(e),this.elemHtml=this.elemHtml.bind(this),this.elemSvg=this.elemSvg.bind(this),this.elem=this.elem.bind(this),this.frag=this.frag.bind(this)}get E(){return Kt(this,"E",new Proxy(this,new ot))}get S(){return Kt(this,"S",new Proxy(this,new ct))}elemHtml(e,n,...r){return e==="svg"?this.alignNs(this.elemSvg(e,n,...r)):(this.isVoid(e)&&r.length&&this.throwVoidChi(e,r),this.elem(e,n,...r))}elemSvg(e,n,...r){return this.mut(this.makeSvg(e,n),n,...r)}elem(e,n,...r){return this.mut(this.make(e,n),n,...r)}frag(...e){let n=this.doc.createDocumentFragment();return this.appendList(n,e),n}makeHtml(e,n){return this.makeNs(Vt,e,a(n))}makeSvg(e,n){return this.makeNs(Ut,e,a(n))}makeNs(e,n,r){return this.doc.createElementNS(f(e),f(n),a(r))}make(e,n){return this.doc.createElement(f(e),a(n))}makeBuf(e){let n=N(e,"namespaceURI");return n?this.makeNs(n,"span"):this.make("span")}mut(e,n,...r){return this.mutProps(e,n),this.mutChi(e,...r),e}mutProps(e,n){return this.loop(Ln(e),n,this.mutProp)}mutProp(e,n,r){return n==="attributes"?this.mutAttrs(e,r):n==="class"?this.mutCls(e,r):n==="className"?this.mutCls(e,r):n==="style"?this.mutStyle(e,r):n==="dataset"?this.mutDataset(e,r):this.mutPropAny(e,n,r)}mutAttrs(e,n){return this.loop(e,n,this.mutAttr)}mutAttr(e,n,r){return this.isBool(n)?this.mutAttrBool(e,n,r):this.mutAttrAny(e,n,r)}mutAttrBool(e,n,r){return f(n),_(n,r,At)?e.setAttribute(n,""):e.removeAttribute(n)}mutAttrAny(e,n,r){return f(n),r=this.strOpt(r),s(r)?e.removeAttribute(n):e.setAttribute(n,r)}mutCls(e,n){n=this.strLax(n),n!==M(e.getAttribute("class"))&&e.setAttribute("class",n)}mutStyle(e,n){if(s(n)||m(n))return this.mutAttrAny(e,"style",n);if(R(n))return this.mutStyleStruct(e,n);throw bt(n,"style")}mutStyleStruct(e,n){return this.loop(e.style,n,this.mutStyleProp),e}mutStyleProp(e,n,r){e[n]=M(_(n,r,m))}mutDataset(e,n){return this.loop(e.dataset,n,this.mutDatasetProp),e}mutDatasetProp(e,n,r){r=this.strOpt(r),s(r)?delete e[n]:e[n]=r}mutPropAny(e,n,r){if(!(n in e))return this.mutAttr(e,n,r);let i=e[n];if(s(i))return A(e,n,i,k(r));if(m(i))return A(e,n,i,this.strLax(r));if(qt(i)){if(qt(r))return this.isBool(n)&&_(n,r,At),A(e,n,i,k(r));throw Qt(e,n,r,i)}if(u(i)){if(s(r)||u(r))return A(e,n,i,k(r));throw Qt(e,n,r,i)}return this.mutAttr(e,n,r)}mutChi(e,...n){if(Y(e),!n.length)return this.clear(e),e;if(!e.hasChildNodes()){for(n of n)this.appendChi(e,n);return e}let r=this.frag(...n);return this.clear(e),e.appendChild(r),e}appendChi(e,n){return s(n)?e:m(n)?(e.append(n),e):Et(n)?(e.appendChild(n),e):En(n)?(this.appendRaw(e,n),e):Mn(n)?E(n)?(this.appendList(e,n),e):(this.appendSeq(e,n),e):(this.appendChi(e,this.strOpt(n)),e)}appendList(e,n){let r=0;for(;;){let i=be(n.length);if(!(r>=0&&r<i))return e;this.appendChi(e,n[r]),r+=1,r-=Me(Sn(i,n.length))}}appendSeq(e,n){for(n of n)this.appendChi(e,n);return e}appendRaw(e,n){if(!e.hasChildNodes()&&"innerHTML"in e)return e.innerHTML=M(n.outerHTML),e;let r=this.makeBuf(e);return r.innerHTML=M(n.outerHTML),this.move(e,r)}mutText(e,n){return Y(e),A(e,"textContent",e.textContent,this.strLax(n)),e}replace(e,...n){Y(e),e.parentNode.replaceChild(this.frag(...n),e)}clear(e){for(;e.hasChildNodes();)e.removeChild(e.lastChild);return e}move(e,n){if(n!==e)for(;n.hasChildNodes();)e.appendChild(n.removeChild(n.firstChild));return e}loop(e,n,r){if(n=a(n))for(let i of fe(n))r.call(this,e,i,n[i]);return e}isHtml(e){return e.namespaceURI===Vt}isSvg(e){return e.namespaceURI===Ut}alignNs(e){if(!(pe(e)&&Jt(e)))return e;let n=e.firstChild;if(!Jt(n))return e;let r=e.namespaceURI;return r&&r!==n.namespaceURI&&(e.innerHTML=e.innerHTML),e}strLax(e){return M(this.strOpt(e))}strOpt(e){if(!(s(e)||this.lax&&!gt(e)))return K(e)}isBool(e){return pn.has(e)}isVoid(e){return gn.has(e)}throwVoidChi(e,n){throw SyntaxError(`expected void element ${h(e)} to have no children, got ${h(n)}`)}patchProto(e){return rn(e,Tn(g)),e.ren=this,this}static native(){return new this(globalThis.document).patchProto(globalThis.Element)}},ot=class extends B{get(e,n){return e.makeHtml(n)}},ct=class extends B{get(e,n){return e.makeSvg(n)}};function Tn(t){return ht.main.goc(t)}var ht=class extends I{make(e){return class extends e{get ren(){return this.constructor.ren}props(r){return this.ren.mutProps(this,r)}chi(...r){return this.ren.mutChi(this,...r)}}}},Gt=Symbol.for("parentNode");function bn(t){return ft.main.goc(t)}var ft=class extends I{make(e){return class extends e{constructor(r){super(),te(r)&&(this.parentNode=r)}get parentNode(){return super.parentNode||k(this[Gt])}set parentNode(r){this[Gt]=r}}}},mt=class extends P(g){constructor(e){super(),this[d]=a(e),this[Z]=!1}get $(){return this[d]}has(e){return x(this[d],e)}get(e){return this[d]?this[d][f(e)]:void 0}set(e,n){let r=this.mutable();return r.$[f(e)]=n,r}as(e){return this.set("as",e)}charset(e){return this.set("charset",e)}checked(e){return this.set("checked",!!e)}class(e){return this.set("class",e)}content(e){return this.set("content",e)}crossorigin(e){return this.set("crossorigin",e)}dataset(e){return this.set("dataset",e)}disabled(e){return this.set("disabled",!!e)}for(e){return this.set("for",e)}height(e){return this.set("height",e)}hidden(e){return this.set("hidden",!!e)}href(e){return this.set("href",e)}httpEquiv(e){return this.set("http-equiv",e)}id(e){return this.set("id",e)}is(e){return this.set("is",e)}lang(e){return this.set("lang",e)}method(e){return this.set("method",e)}name(e){return this.set("name",e)}onchange(e){return this.set("onchange",e)}onclick(e){return this.set("onclick",e)}oninput(e){return this.set("oninput",e)}onkeydown(e){return this.set("onkeydown",e)}onkeypress(e){return this.set("onkeypress",e)}onkeyup(e){return this.set("onkeyup",e)}onsubmit(e){return this.set("onsubmit",e)}pattern(e){return this.set("pattern",e)}placeholder(e){return this.set("placeholder",e)}rel(e){return this.set("rel",e)}required(e){return this.set("required",!!e)}role(e){return this.set("role",e)}selected(e){return this.set("selected",!!e)}src(e){return this.set("src",e)}style(e){return this.set("style",e)}tabIndex(e){return this.set("tabIndex",e)}target(e){return this.set("target",e)}type(e){return this.set("type",e)}value(e){return this.set("value",e)}width(e){return this.set("width",e)}cls(e){return e?this.set("class",Hn(this.get("class"),e)):this}button(){return this.type("button")}submit(){return this.type("submit")}tarblan(){return this.target("_blank").rel("noopener noreferrer")}mut(e){return e=a(e),e?this.mutFromStruct(e):this.mutable()}mutFromStruct(e){let n=this.mutable();for(let r of fe(e))n.$[r]=e[r];return n}with(e){if(this[d])return this.mut(e);let n=this.mutableOuter();return n[d]=a(e),n}frozen(){return this[Z]=!0,this}snapshot(e){return this.with(e).frozen()}mutable(){return this.mutableOuter().mutableInner()}mutableOuter(){return this[Z]?new this.constructor().mut(this.$):this}mutableInner(){return!this[d]&&(this[d]=new g),this}static of(e){return s(e)?new this:vt(e)instanceof this?e:new this(e)}static get default(){return new this().frozen()}},d=Symbol.for("$"),Z=Symbol.for("frozen");function Mn(t){return o(t)&&!gt(t)&&(E(t)||ee(t))}function En(t){return x(t,"outerHTML")}function Et(t){return o(t)&&"parentNode"in t&&"childNodes"in t}function Y(t){return S(t,Et)}function pe(t){return Et(t)&&"setAttribute"in t}function Ln(t){return S(t,pe)}function yn(t){return o(t)&&"createElement"in t&&"createElementNS"in t&&"createDocumentFragment"in t}function wn(t){return S(t,yn)}function Jt(t){return x(t,"namespaceURI")}function a(t){return te(t)&&"$"in t?t.$:t}function k(t){return t!=null?t:null}function Qt(t,e,n,r){return TypeError(`unable to set ${h(e)} ${h(n)} on ${h(t)}: type mismatch with ${h(r)}`)}function A(t,e,n,r){ne(n,r)||(t[e]=r)}function Hn(t,e){return t=M(t),e=M(e),t+(t&&e&&" ")+e}function _(t,e,n){if(s(e)||n(e))return e;throw TypeError(`invalid property ${h(t)}: `+$e(e,he(n)))}function Sn(t,e){return t>e?t-e:0}var V=class extends Map{set(e,n){return super.set(f(e),_t(n))}},dt=class extends P(V){static get default(){return new this().set("a","HTMLAnchorElement").set("area","HTMLAreaElement").set("audio","HTMLAudioElement").set("base","HTMLBaseElement").set("body","HTMLBodyElement").set("br","HTMLBRElement").set("button","HTMLButtonElement").set("canvas","HTMLCanvasElement").set("data","HTMLDataElement").set("datalist","HTMLDataListElement").set("details","HTMLDetailsElement").set("dialog","HTMLDialogElement").set("div","HTMLDivElement").set("dl","HTMLDListElement").set("embed","HTMLEmbedElement").set("fieldset","HTMLFieldSetElement").set("font","HTMLFontElement").set("form","HTMLFormElement").set("frame","HTMLFrameElement").set("frameset","HTMLFrameSetElement").set("head","HTMLHeadElement").set("heading","HTMLHeadingElement").set("hr","HTMLHRElement").set("html","HTMLHtmlElement").set("iframe","HTMLIFrameElement").set("image","HTMLImageElement").set("input","HTMLInputElement").set("label","HTMLLabelElement").set("legend","HTMLLegendElement").set("li","HTMLLIElement").set("link","HTMLLinkElement").set("map","HTMLMapElement").set("marquee","HTMLMarqueeElement").set("menu","HTMLMenuElement").set("meta","HTMLMetaElement").set("meter","HTMLMeterElement").set("del","HTMLModElement").set("ins","HTMLModElement").set("object","HTMLObjectElement").set("ol","HTMLOListElement").set("optgroup","HTMLOptGroupElement").set("option","HTMLOptionElement").set("output","HTMLOutputElement").set("p","HTMLParagraphElement").set("param","HTMLParamElement").set("picture","HTMLPictureElement").set("pre","HTMLPreElement").set("progress","HTMLProgressElement").set("q","HTMLQuoteElement").set("blockquote","HTMLQuoteElement").set("script","HTMLScriptElement").set("select","HTMLSelectElement").set("slot","HTMLSlotElement").set("source","HTMLSourceElement").set("span","HTMLSpanElement").set("style","HTMLStyleElement").set("caption","HTMLTableCaptionElement").set("th","HTMLTableCellElement").set("td","HTMLTableCellElement").set("col","HTMLTableColElement").set("colgroup","HTMLTableColElement").set("table","HTMLTableElement").set("tr","HTMLTableRowElement").set("tfoot","HTMLTableSectionElement").set("thead","HTMLTableSectionElement").set("tbody","HTMLTableSectionElement").set("template","HTMLTemplateElement").set("textarea","HTMLTextAreaElement").set("time","HTMLTimeElement").set("title","HTMLTitleElement").set("track","HTMLTrackElement").set("ul","HTMLUListElement").set("video","HTMLVideoElement").set("svg","SVGSvgElement")}},lt=class extends P(V){invert(e){for(let[n,r]of e)this.set(r,this.has(r)?void 0:n);return this}localName(e){for(H(e);u(e);){let{name:n}=e;if(n){if(this.has(n))return this.get(n);let r=n.match(He(this.re));if(r){let i=r[1].toLowerCase();return this.set(n,i),i}}e=Object.getPrototypeOf(e)}}get re(){return/^(?:HTML|SVG)(\w*)Element$/}static get default(){return new this().invert(dt.main)}};function L(t){return U.main.reg(t)}var U=class extends P(g){constructor(e){super(),this.pending=new Set,this.tagToCls=new Map,this.clsToTag=new Map,this.definer=Wt(e)}reg(e){return this.hasCls(e)||(this.mut(e),this.def(e)),e}def(e){var C,Ct;if(!this.definer){this.pending.add(e);return}this.pending.delete(e);let{customName:n}=e;if((Ct=(C=this.definer).get)!=null&&Ct.call(C,n))return;let{localName:r}=e,i=r!==n?{extends:r}:void 0;this.definer.define(n,e,i)}hasTag(e){return this.tagToCls.has(e)}hasCls(e){return this.clsToTag.has(e)}tagCls(e){return this.tagToCls.get(e)}clsTag(e){return this.clsToTag.get(e)}setDefiner(e){if(this.definer=Wt(e))for(let n of this.pending)this.def(n)}mut(e){let n=Dt(e,"customName")||this.toTag(e.name);if(!n)throw Error(`unable to derive custom name for ${h(e)}`);let r=Dt(e,"localName")||lt.main.localName(e)||n;Bt(e,"localName",r),Bt(e,"customName",n),this.assoc(n,e)}toTag(e){e=xn(e);let n=e,r=0;for(;this.hasTag(n);)n=e+"-"+ ++r;return n}assoc(e,n){On(e),H(n),this.clsToTag.set(n,e),this.tagToCls.set(e,n)}};function xn(t){let e=Nn(_t(t));switch(e.length){case 0:return"";case 1:return"a-"+e[0].toLowerCase();default:return Cn(e)}}function Nn(t){return t&&t.match(/[A-Za-z0-9]+?(?=[^a-z0-9]|$)/g)||[]}function Cn(t){return t.join("-").toLowerCase()}function An(t){return ie(t,"define")}function Wt(t){return Tt(t,An)}function In(t){return m(t)&&/^[a-z][a-z\d_.]*-[a-z\d_.-]*$/.test(t)}function On(t){return S(t,In)}var b=globalThis,Zt;(Zt=b.document)==null||Zt.implementation;var qn=b.document,Pn=b.customElements;U.main.setDefiner(Pn);var kn=new ut(qn).patchProto(b.Element),Xt=kn.E,p=mt.main;function X(t){return bn(an(t))}var Lt=class extends X(b.HTMLElement){init(...e){for(let r of e)$n(r);let n=e.length;return this.props(p.cls("carousel")).chi(e,new y().init(n),new j().init(n),new F().init(n)).setNext()}connectedCallback(){this.initTimer()}disconnectedCallback(){this.deinitTimer()}initTimer(){this.deinitTimer(),this.timer=setInterval(this.setNext.bind(this),1024*3)}deinitTimer(){clearInterval(this.timer),this.timer=void 0}dots(){return this.desc(y)}items(){return Ye(this.childNodes,Dn)}setInd(e){let n=this.items();if(Ie(n))return this;for(let r of n)r.hidden=!0;return n[e].hidden=!1,this.dots().setInd(e),this}setPrev(){return this.setInd(this.dots().prevInd())}setNext(){return this.setInd(this.dots().nextInd())}},$=Lt;l($,"customName","a-carousel"),(()=>{L(Lt)})();function $n(t){return t.setAttribute("data-carousel-item",""),t.classList.add("carousel-item"),t.hidden=!0,t}function Dn(t){return t.hasAttribute("data-carousel-item")}var yt=class extends X(b.HTMLElement){init(e){return this.props(p.cls("carousel-dots")).chi(tn(e,Fn))}currentInd(){return Xe(this.childNodes,jn)}prevInd(){return(this.currentInd()-1+this.childNodes.length)%this.childNodes.length}nextInd(){return(this.currentInd()+1)%this.childNodes.length}setInd(e){for(let n of this.childNodes)n.unsetCurrent();this.childNodes[e].setCurrent()}},y=yt;l(y,"customName","carousel-dots"),(()=>{L(yt)})();function jn(t){return t.isCurrent()}var wt=class extends X(b.HTMLButtonElement){caro(){return this.anc($)}init(){return this.props(this.A)}connectedCallback(){this.onclick=this.onClick}},w=wt;l(w,"customName","carousel-btn"),(()=>{L(wt)})();function Fn(){return new D().init()}var Ht=class extends w{get A(){return p.cls("carousel-dot")}ind(){return We(this.anc(y).childNodes,this)}onClick(e){Q(e),this.caro().setInd(this.ind()).initTimer()}isCurrent(){return!!this.hasAttribute("aria-current")}setCurrent(){this.setAttribute("aria-current","step")}unsetCurrent(){this.removeAttribute("aria-current")}},D=Ht;l(D,"customName","carousel-dot"),(()=>{L(Ht)})();var St=class extends w{get A(){return p.cls("carousel-control carousel-prev")}onClick(e){Q(e),this.caro().setPrev()}},j=St;l(j,"customName","carousel-prev"),(()=>{L(St)})();var xt=class extends w{get A(){return p.cls("carousel-control carousel-next")}onClick(e){Q(e),this.caro().setNext()}},F=xt;l(F,"customName","carousel-next"),(()=>{L(xt)})();var Nt=class extends X(b.HTMLAnchorElement){init(e,n){let r=K(e.image());return this.dataset.embed=K(e.embed()),this.props(p.href(n).cls("sf-embed block preview relative").style(r?{backgroundImage:`url(${r})`}:void 0)).chi(Xt.span.props(p.cls("fa fa-youtube-play --free size-larger abs-cen")))}connectedCallback(){this.onclick=this.onClick}onClick(e){fn(e)||(Q(e),this.chi(Xt.iframe.props(p.src(this.dataset.embed).set("allowFullScreen","true"))))}},v=Nt;l(v,"customName","a-embed"),(()=>{L(Nt)})();function zn(){let t=window.location,e=t.hash;if(!e)return;let n=document.querySelector(e);if(!n)return;let r=window.history;n.scrollIntoView(),r.replaceState(r.state,"",t.origin+t.pathname+t.search)}un&&zn();export{$ as Carousel,v as Embed,X as MixElem,kn as ren};
